chrome.storage.local.get("key",function(t){t.key?(output=JSON.parse(t.key),value=output.key[0],chrome.storage.local.get(value,function(t){output=JSON.parse(t[value]);for(let t=0;t<output.name.length;t++)$("#data").append("<tr><th>"+parseInt(t+1)+"</th><td>"+output.name[t]+'</td><td class="address">'+output.address[t]+'</td><td class="phone"><a href="tel:'+output.phone[t]+'">'+output.phone[t]+'</a></td><td class="phone"><a href="'+output.url[t]+'">'+output.url[t]+"</a></td></tr>");$(function(){$("#example").DataTable()})})):$(".row").append('<div style="margin: 0 auto;font-family: serif;letter-spacing: 1.5px;"><h2>There is no data present</h2></div>')}),chrome.storage.local.get("key",function(t){if(t.key){output=JSON.parse(t.key);for(let t=0;t<output.key.length;t++)$("#dropdownBox").append('<option value="'+output.key[t]+'">'+output.key[t]+"</option>")}else $(".topSection").remove()}),$("#dropdownBox").change(function(t){t=$(this).val(),$(".table-responsive").remove(),$(".appendSection").append('<div class="col-md-12 table-responsive"><table id="example" class="display" style="width:100%"><thead><tr><th>S. No.</th><th>Name</th><th>Address</th><th>Phone</th><th>URL</th></tr></thead><tbody id="data"></tbody><tfoot><tr><th>S. No.</th><th>Name</th><th>Address</th><th>Phone</th><th>URL</th></tr></tfoot></table></div>'),chrome.storage.local.get(t,function(e){output=JSON.parse(e[t]),$("#data").empty();for(let t=0;t<output.name.length;t++)$("#data").append("<tr><th>"+parseInt(t+1)+"</th><td>"+output.name[t]+'</td><td class="address">'+output.address[t]+'</td><td class="phone"><a href="tel:'+output.phone[t]+'">'+output.phone[t]+'</a></td><td class="phone"><a href="tel:'+output.url[t]+'">'+output.url[t]+"</a></td></tr>");$(function(){$("#example").DataTable()})})}),$(function(){$("#generateExcel").click(function(){$("#example").DataTable().rows().data();let t=$("#dropdownBox").val();$("#example").tableHTMLExport({type:"csv",filename:t+".csv"})})}),$(function(){$("#deleteList").on("click",function(){let t=$("#dropdownBox").val();chrome.storage.local.get("key",function(e){if(e.key){output=JSON.parse(e.key);let o=[],a=0;for(j=0;j<output.key.length;j++)output.key[j]!=t?(o[a]=output.key[j],a++):value=output.key[j];if(o.length>0){let t=JSON.stringify({key:o});chrome.storage.local.set({key:t})}else chrome.storage.local.remove("key");chrome.storage.local.remove(value),location.reload()}})})});
